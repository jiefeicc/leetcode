//ç»™ä½  k æšç›¸åŒçš„é¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä»ç¬¬ 1 å±‚åˆ°ç¬¬ n å±‚å…±æœ‰ n å±‚æ¥¼çš„å»ºç­‘ã€‚
//
// å·²çŸ¥å­˜åœ¨æ¥¼å±‚ f ï¼Œæ»¡è¶³ 0 <= f <= n ï¼Œä»»ä½•ä» é«˜äº f çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» f æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚
//
// æ¯æ¬¡æ“ä½œï¼Œä½ å¯ä»¥å–ä¸€æšæ²¡æœ‰ç¢çš„é¸¡è›‹å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ x æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= x <= nï¼‰ã€‚å¦‚æœé¸¡è›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æ¬¡ä½¿ç”¨å®ƒã€‚å¦‚æœæŸæšé¸¡è›‹æ‰”ä¸‹åæ²¡æœ‰æ‘”ç¢
//ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åçš„æ“ä½œä¸­ é‡å¤ä½¿ç”¨ è¿™æšé¸¡è›‹ã€‚
//
// è¯·ä½ è®¡ç®—å¹¶è¿”å›è¦ç¡®å®š f ç¡®åˆ‡çš„å€¼ çš„ æœ€å°æ“ä½œæ¬¡æ•° æ˜¯å¤šå°‘ï¼Ÿ
//
//
// ç¤ºä¾‹ 1ï¼š
//
//
//è¾“å…¥ï¼šk = 1, n = 2
//è¾“å‡ºï¼š2
//è§£é‡Šï¼š
//é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 0 ã€‚
//å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œè‚¯å®šèƒ½å¾—å‡º f = 1 ã€‚
//å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆè‚¯å®šèƒ½å¾—å‡º f = 2 ã€‚
//å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š f æ˜¯å¤šå°‘ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
//
//è¾“å…¥ï¼šk = 2, n = 6
//è¾“å‡ºï¼š3
//
//
// ç¤ºä¾‹ 3ï¼š
//
//
//è¾“å…¥ï¼šk = 3, n = 14
//è¾“å‡ºï¼š4
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= k <= 100
// 1 <= n <= 10â´
//
// Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’ ğŸ‘ 740 ğŸ‘ 0

package leetcode.editor.cn;

import java.util.HashMap;
import java.util.Map;

//java:é¸¡è›‹æ‰è½
class SuperEggDrop{
    public static void main(String[] args){
        Solution solution = new SuperEggDrop().new Solution();
    }
    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        /*
        çŠ¶æ€å®šä¹‰ï¼šdp[i][j] ä½¿ç”¨ i ä¸ªé¸¡è›‹,ä¸€å…±æœ‰ j å±‚æ¥¼æ¢¯ï¼ˆæ³¨æ„ï¼šè¿™é‡Œ j ä¸è¡¨ç¤ºé«˜åº¦ï¼Œè¡¨ç¤ºåŒºé—´æ¥¼å±‚æ•°é‡ï¼‰çš„æƒ…å†µä¸‹çš„æœ€å°‘å®éªŒçš„æ¬¡æ•°ã€‚
        åˆå§‹çŠ¶æ€ï¼š
            åŒºé—´æ¥¼å±‚æ•°ä¸º0ï¼Œä¸å¯èƒ½æµ‹å‡ºé¸¡è›‹çš„ä¸ªæ•° dp[0][j] = 0;
            åŒºé—´æ¥¼å±‚æ•°ä¸º1ï¼Œ0ä¸ªé¸¡è›‹ï¼Œæµ‹ä¸å‡ºï¼Œå¤§äºç­‰äº1ä¸ªé¸¡è›‹éƒ½åªè¦æ‰”ä¸€æ¬¡
            é¸¡è›‹ä¸ªæ•°ä¸º0ï¼Œæµ‹ä¸å‡º
            é¸¡è›‹ä¸ªæ•°ä¸º1,åŒºé—´æ¥¼å±‚æ•°ä¸ºå‡ è¦æµ‹å‡ æ¬¡
         çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š
            åœ¨xå±‚è›‹ç¢äº†ï¼Œå¾—åˆ°dp[i][j]çš„ç»“æœçš„å®éªŒåœ¨xå±‚ä¸‹é¢åšï¼ˆå…ˆä¸ç®¡å“ªä¸€å±‚ï¼Œå°±çŸ¥é“åœ¨ä¸‹é¢ï¼Œå‰©ä½™å±‚æ•°k-1ï¼‰ï¼šdp[i][j] = dp[x-1][j-1]
            åœ¨xå±‚è›‹æ²¡ç¢ï¼Œå¾—åˆ°dp[i][j]çš„ç»“æœçš„å®éªŒåœ¨xå±‚ä¸‹é¢åšï¼šdp[i][j] = dp[i][j-x]
            æ±‚æœ€åæƒ…å†µä¸‹æ‰”é¸¡è›‹çš„æœ€å°æ¬¡æ•°ï¼Œæ‰€ä»¥é¸¡è›‹åœ¨ç¬¬ i å±‚æ¥¼ç¢æ²¡ç¢ï¼Œå–å†³äºå“ªç§æƒ…å†µçš„ç»“æœæ›´å¤§ï¼Œåœ¨è¯¥å±‚åˆæ‰”ä¸€æ¬¡æ‰€ä»¥ +1
                res = min(res, max(dp(K - 1, i - 1), dp(K, N - i)) + 1)
         äºŒåˆ†æŸ¥æ‰¾ä¼˜åŒ–ï¼š
            æ ¹æ® dp(K,N)æ•°ç»„çš„å®šä¹‰ï¼ˆæœ‰Kä¸ªé¸¡è›‹é¢å¯¹Nå±‚æ¥¼ï¼Œæœ€å°‘éœ€è¦æ‰”å‡ æ¬¡ï¼‰ï¼ŒKå›ºå®šæ—¶ï¼Œå‡½æ•°éšç€Nçš„å¢åŠ å•è°ƒé€’å¢
            æ³¨æ„ dp(K-1, i-1) å’Œ dp(K, N-i) è¿™ä¸¤ä¸ªå‡½æ•°
            iæ˜¯ä» 1 åˆ° N å•å¢çš„ï¼Œå›ºå®š K å’Œ Nï¼ŒæŠŠè¿™ä¸¤ä¸ªå‡½æ•°çœ‹åšå…³äº i çš„å‡½æ•°ï¼Œâ€œç¢äº†â€éšç€ i çš„å¢åŠ å•è°ƒé€’å¢çš„ï¼Œâ€œä¸ç¢â€éšç€ i çš„å¢åŠ å•è°ƒé€’å‡çš„
            è¿™æ—¶æ±‚ min(res, max(dp(K - 1, i - 1), dp(K, N - i)) + 1)ï¼Œå°±æ˜¯æ±‚ä¸¤æ¡å‡½æ•°ç›´çº¿çš„äº¤ç‚¹
            ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾â€œå±±è°·â€çš„
         */
        // æ„é€ å¤‡å¿˜å½•
        Map<Integer, Integer> memo = new HashMap<>();
        public int superEggDrop(int K, int N) {
            if (N == 0) {
                return 0;
            } else if (K == 1) {
                return N;
            }
            // æ„é€  keyï¼Œä¿è¯keyå”¯ä¸€ï¼ŒK <= 100ï¼Œæ‰€ä»¥N*1000
            Integer key = N * 1000 + K;
            if (memo.containsKey(key)) {
                return memo.get(key);
            }
            // ç”¨äºŒåˆ†æœç´¢ä»£æ›¿çº¿æ€§æœç´¢
            int low = 1, high = N;
            int res = Integer.MAX_VALUE;
            while (low  <= high) {
                int mid = (low + high) / 2;
                int broken = superEggDrop(K - 1, mid - 1);
                int notBroken = superEggDrop(K, N - mid);
                // å½“ç¢äº†æ¯”ä¸ç¢å¤§ï¼Œå¾€å°äº†æ‰¾
                if (broken > notBroken) {
                    high = mid - 1;
                    res = Math.min(res, broken + 1);
                } else {
                    low = mid + 1;
                    res = Math.min(res, notBroken + 1);
                }
            }
            memo.put(key, res);
            return res;
        }
        // dpè§£æ³•
        public int _superEggDrop(int K, int N) {
            int[][] dp = new int[K + 1][N + 1];
            for (int i = 1; i <= N; i++) {
                dp[1][i] = i; // only one egg
                dp[0][i] = 0; // no egg
            }
            for (int i = 1; i <= K; i++) {
                dp[i][0] = 0; // zero floor
            }
            for (int k = 2; k <= K; k++) { // start from two egg
                for (int n = 1; n <= N; n++) {
                    int tMinDrop = Integer.MAX_VALUE;
                    for (int x = 1; x <= n; x++) {
                        tMinDrop = Math.min(tMinDrop, 1 + Math.max(dp[k - 1][x - 1], dp[k][n - x]));
                    }
                    dp[k][n] = tMinDrop;
                }
            }
            return dp[K][N];
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}
